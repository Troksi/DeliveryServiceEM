## DeliveryServiceEM


`DeliveryServiceEM` - модуль по фильтрации и составление списков для доставки грузов до место назначения.
# Содержание
1. [О репозетории](#paragraph1)
1. [БД](#paragraph2)
1. [Режимы работы](#paragraph3)
    1. [Безоконный режим](#subparagraph1)
    1. [Оконный режим](#subparagraph2)
3. [Тесты](#paragraph2)

# В репозитории есть  следующее: <a name="paragraph1"></a>
- скрипты для разворачивания БД на PostgresSQL
- скрипты для автоматического генерации случайных данных
- импорт и экспорт заказов
- составление списков по заданному фильтру на отправку
- работа безоконного режима
- логирование
- файл конфигурации

# Для поднятии базы <a name="paragraph2"></a>
> [!IMPORTANT]
> Прежде, необходимо сохранить файл `\Postgrsql\txt-cities-russia.txt` в дерикторию базы. 

> [!NOTE]
> Узнать расположение базы поможет скрипт `show data_directory;`

Необходим PostgreSQL и выполнение всех скриптов в папке `\Postgrsql`.

# Работа с программой <a name="paragraph3"></a>

При первом запуске автоматически создастся `appsettings.json` файл.

В каком режиме запустится отвечает флаг `AppSettings: RunWithoutWindow`

При любом режиме важно указать верную строку подключения к базе `ConnectionStrings`.

## Безоконный режим <a name="subparagraph1"></a>
 Путь до логов берется из `AppSettings: DeliveryLogPath`.

 Результат записывается в `AppSettings: DeliveryOrderPath`.

 > Каждый путь при отсутствии создается вместе с указанной директорией.

Для фильтрации берутся только `AppSettings: CityDistrict` и `AppSettings: FirstDeliveryDateTime`.

По результату работы будут собраны заказы на доставку от указанного времени и до 30 минут спустя, заказы возьмутся те что попали в диапазон и те что спустя пол часа от первого заказа в диапазоне.

## Оконный режим <a name="subparagraph2"></a>
Путь до логов берется из `Logging: Logs/log.txt`.

В оконном приложении сразу же отоброзяться весь список заказов.

В `поисковом окне` можно указать конкретный пункт. Или выбрать конкретную строку из заказа для автозаполнения.

Выбор первого дня и времени - выбор начального временого диапазона.

Выбор второго дня и времени - выбор  окончания для поиска хотябы первого заказа.

Кнопка `Поиск` отобразит результат фильтра, с учетом первых за полчаса заказов от первого найденого заказа.

Кнопка `Сохранить` предложит выбрать место для сохранения результата фильтрации отображенных заказов.

Кнопки `Импорт` и `Экспорт` заносят и выгружают заказы из БД.
> [!NOTE] 
> Id при `импорте` генерируются новые.

# Тесты <a name="paragraph1"></a>
Тесты охватывают наиболее важны части программы.

Для теста `ConfigurationTests` может возникнуть окно.

Для `DatabaseConnectionTests` требуется указать строку подключения.
